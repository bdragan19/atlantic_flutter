os: osx
language: generic
before_script:
- brew update
- brew install --HEAD usbmuxd
- brew unlink usbmuxd
- brew link usbmuxd
- brew install --HEAD libimobiledevice
- brew install ideviceinstaller
- brew install ios-deploy
- git clone https://github.com/flutter/flutter.git -b beta --depth 1
script:
- flutter/bin/flutter build ios --debug --no-codesign
cache:
  directories:
  - "$HOME/.pub-cache"
before_deploy:
- pushd build/ios/iphoneos
- mkdir Payload
- cd Payload
- ln -s ../Runner.app
- cd ..
- zip -r app.ipa Payload
- popd
deploy:
  provider: releases
  api_key:
    secure: I/gN5YsN6DN5ExiS9P8gkFfGg7SgUs2V8VOnhaKhBptxlz3wiWJZ3dpcWJCA86CuNvw5qaGMsfJyIalBYtk3UBFXwkCH6wajR8MiAqs7cnLkjEAqSF+2gL+DR2Mq5kZb+tokNeHnzoCS/Zuy/JYjQWO7BLa+O5UUyrPsV3o7S6JqfUXHA3rvW8M9M1tktOqknamKhiERtb7urKRZIYX+KjTYcbKWhOA4GZyrh54RLACtSUiAti2Q2LemrePrsdQgslmAPivR0PXCsW2telTWLZZqRnFLSFf8hozqQycuybcXqqqh5GQOuD8b4meZXCncVdEDNCO0dshDMI2WhNnaFXoEV1Rr/m7sATXwnAP3iJ1jaBxfJy3joKlVEFI4MqpFZnWHUXF1z/yG3lkNIWHlTVZ2lPiIZB+lclOo8P8COc1ECZjKL5H8shp3/brPvywQPtxJX9ZHttPAdDKfCvBF+/lzTo/F/NMEG30+l/EnUi88y761CXZw5jJCmqnFwKKMcfg4CHlBbEVpKtXBd3ulseq/8oLa62hpl8WTsM93mXykKRJ6VSaebf/xoN6uM3t2TQ1FI+pgNWj1j4Z2qn88kLabvFIKMe+EqHFSfMghibvKm9nRFhxLt+OnGJaMgR5NYHQAtIr+2+Qb1oZsRwkCG+0Wc0y3BL64hkD2PA7vvPk=
  file: 'build/ios/iphoneos/app.ipa'
  on:
    repo: bdragan19/atlantic_flutter
  skip_cleanup: 'true'
